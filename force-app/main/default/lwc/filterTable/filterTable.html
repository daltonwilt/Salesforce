<template>
    <div style="border: 1px solid rgb(201,201,201); border-radius: 5px;">
        <div style="padding: 0px 1rem; padding-top: 1rem;">
            <div>
                <lightning-card title={title} icon-name="standard:record">
                    <lightning-button label="New" onclick={create} slot="actions"></lightning-button>
                    <div style="display: flex;">
                        <div style="text-align: left; width: 30%">
                            <div class="slds-p-bottom_x-small">
                                <div style="display: flex;">
                                    <lightning-input label="" type="search" placeholder="Search" variant="label-hidden" onchange={handleSearch}></lightning-input>
                                    <lightning-button-icon icon-name="utility:filterList" variant="container" alternative-text="Settings" title="Settings" onclick={filter}></lightning-button-icon>
                                </div>
                            </div>
                        </div>
                        <div style="text-align: right; width: 70%">
                            <div class="slds-list_inline">
                                <template if:true={isPagination}>
                                    <div class="slds-list_inline slds-p-bottom_xx-small customSelect">
                                        <label class="slds-text-color_weak slds-p-horizontal_x-small" for="recordsPerPage">Records per page:</label> 
                                        <div class="slds-select_container">
                                            <select class="slds-select" id="recordsPerPage" onchange={handlePageSize}>
                                                <template for:each={pageSizeOptions} for:item="option">
                                                    <option key={option} value={option}>{option}</option>
                                                </template>
                                            </select>
                                        </div>
                                    </div>
                                </template>
                                <template if:true={isPagination}>
                                    <div class="slds-col slds-p-bottom_xx-small">
                                        <template if:true={isPrevious}>
                                            <lightning-button-icon icon-name="utility:left" variant="bare" size="medium" alternative-text="Previous Page" onclick={previous}></lightning-button-icon>
                                        </template>
                                        <label class="slds-text-color_weak slds-p-horizontal_x-small" for="pageNum">Page:</label> 
                                        <input type="number" id="pageNum" value={pageNumber} maxlength="4" onkeypress={handlePageNumberChange} class="customInput" title="Go to a Page"></input>
                                        <span>&nbsp;of&nbsp;<b id="pages">{pages}</b></span>
                                        <template if:true={isNext}>
                                            <lightning-button-icon icon-name="utility:right" variant="bare" size="medium" alternative-text="Next Page" onclick={next}></lightning-button-icon>
                                        </template>
                                    </div>
                                </template>
                            </div>
                        </div>
                    </div>
                </lightning-card>
            </div>
        </div>

        <c-lwc-data-table
            hide-checkbox-column
            key-field="Id"
            data-id="table"
            data={records}
            columns={columns}
            sorted-by={sortBy}
            sorted-direction={sortDirection}
            onrowaction={action}
            onsave={save}>
        </c-lwc-data-table>

        <template if:true={isNew}>
            <c-new-record 
                object-type={objectType}
                parent-id={parentId}
                parent-api="AccountId"
                onback={create}>
            </c-new-record>
        </template>

        <template if:true={isFilter}>
            <c-filter-settings 
                object-type={objectType}
                parent-id={parentId}
                onback={filter}>
            </c-filter-settings>
        </template>
    </div>
</template>